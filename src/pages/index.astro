---
import BaseLayout from '~/layouts/BaseLayout.astro';
import Hero from '~/components/Hero.astro';
import ServiceCard from '~/components/ServiceCard.astro';
import ResearchCard from '~/components/ResearchCard.astro';
import AchievementCard from '~/components/AchievementCard.astro';
import PartnerCard from '~/components/PartnerCard.astro';
import TeamCard from '~/components/TeamCard.astro';
import PostCard from '~/components/PostCard.astro';
import { missionItems } from '~/data/mission';
import { services } from '~/data/services';
import { researchHighlights } from '~/data/research';
import { achievements } from '~/data/achievements';
import { partners } from '~/data/partners';
import { teamMembers } from '~/data/team';
import { companyInfo } from '~/data/company';
import { getCollection } from 'astro:content';

const posts = (await getCollection('posts'))
  .sort((a, b) => b.data.pubDate.getTime() - a.data.pubDate.getTime())
  .slice(0, 3);
---
<BaseLayout
  title="tonoi株式会社 | Hybrid Computing™で未来のIT基盤をデザイン"
  description="クラウドとエッジを結ぶHybrid Computing™で社会実装を推進するtonoi株式会社。分散AI、スマートシティ、PoC設計の知見を統合したサービスを提供しています。"
>
  <Hero />

  <section id="insights" class="bg-gradient-to-b from-brand-50/60 via-white to-white py-20">
    <div class="mx-auto max-w-6xl px-6">
      <div class="mx-auto max-w-3xl text-center">
        <p class="text-sm font-semibold uppercase tracking-[0.4em] text-brand-600">Insights</p>
        <h2 class="mt-4 text-3xl font-semibold text-slate-900 md:text-4xl">最新ノート・ブログ</h2>
        <p class="mt-4 text-base leading-relaxed text-slate-600 md:text-lg">
          Generative AI、スマートシティ、PoC設計など、旧サイトで反響の大きかったトピックを最新記事として整理しています。
        </p>
      </div>
      <div class="mt-12 grid gap-6 md:grid-cols-2 xl:grid-cols-3">
        {posts.map((post) => (
          <PostCard post={post} />
        ))}
      </div>
    </div>
  </section>

  <section id="mission" class="bg-gradient-to-b from-white via-brand-50/40 to-white py-24">
    <div class="mx-auto max-w-6xl px-6">
      <div class="max-w-3xl">
        <p class="text-sm font-semibold uppercase tracking-[0.4em] text-brand-600">Mission</p>
        <h2 class="mt-4 text-3xl font-semibold text-slate-900 md:text-4xl">クラウドと現場をつなぐ分散アーキテクチャを社会へ</h2>
        <p class="mt-4 text-base leading-relaxed text-slate-600 md:text-lg">
          Legacy サイトで培った実証結果と最新の Hybrid Computing™ 研究を統合し、プライバシーとスピードを両立する運用基盤を構築しています。
        </p>
      </div>
      <div class="mt-12 grid gap-6 md:grid-cols-2 xl:grid-cols-3">
        {missionItems.map((item) => (
          <article class="group relative overflow-hidden rounded-3xl border border-brand-100 bg-white/95 p-8 shadow-lg shadow-brand-100/50 transition hover:-translate-y-1 hover:shadow-xl">
            <div
              class="absolute inset-0 -z-10 opacity-15 transition group-hover:opacity-30"
              style={`background-image:url(${item.image});background-size:cover;background-position:center;`}
            />
            <p class="text-xs font-semibold uppercase tracking-[0.35em] text-brand-500">{item.label}</p>
            <h3 class="mt-5 text-2xl font-semibold text-slate-900">{item.title}</h3>
            <p class="mt-4 text-sm leading-relaxed text-slate-600">{item.description}</p>
            <ul class="mt-5 space-y-2 text-sm text-slate-600">
              {item.points.map((point) => (
                <li class="flex items-start gap-2">
                  <span class="mt-1 h-1.5 w-1.5 flex-none rounded-full bg-brand-400"></span>
                  <span>{point}</span>
                </li>
              ))}
            </ul>
          </article>
        ))}
      </div>
    </div>
  </section>

  <section id="services" class="bg-white py-24">
    <div class="mx-auto max-w-6xl px-6">
      <div class="grid gap-12 md:grid-cols-[minmax(0,1fr)_22rem]">
        <div>
          <p class="text-sm font-semibold uppercase tracking-[0.4em] text-brand-600">Services</p>
          <h2 class="mt-4 text-3xl font-semibold text-slate-900 md:text-4xl">試作から社会実装までを駆動するサービスライン</h2>
          <p class="mt-4 text-base leading-relaxed text-slate-600 md:text-lg">
            IoT 試作、クラウド運用、Hybrid Computing™ ミドルウェアの知見を統合し、クラウド・エッジ・ハードウェアを跨るシステムを最短距離で立ち上げます。
          </p>
          <div class="mt-8 flex flex-wrap gap-3 text-sm text-slate-500">
            <span class="rounded-full bg-brand-50 px-3 py-1">PoC設計</span>
            <span class="rounded-full bg-brand-50 px-3 py-1">クラウドネイティブ</span>
            <span class="rounded-full bg-brand-50 px-3 py-1">エッジAI</span>
            <span class="rounded-full bg-brand-50 px-3 py-1">分散データマネジメント</span>
          </div>
        </div>
        <div class="rounded-3xl border border-brand-100 bg-brand-50/80 p-6 shadow-soft">
          <h3 class="text-sm font-semibold uppercase tracking-[0.3em] text-brand-600">Featured</h3>
          <p class="mt-4 text-sm leading-relaxed text-slate-600">
            Hybrid Computing™ は、データを動かさずに演算コードを配信するアーキテクチャです。PoC 段階から社会実装まで伴走し、旧サイトで公開していた技術資料も最新情報として統合しました。
          </p>
          <a
            href="/legacy/"
            class="mt-6 inline-flex items-center gap-2 text-sm font-semibold text-brand-600 hover:text-brand-700"
          >
            旧サイトアーカイブを見る
            <span aria-hidden="true">↗</span>
          </a>
        </div>
      </div>
      <div class="mt-12 grid gap-6 md:grid-cols-2 xl:grid-cols-3">
        {services.map((service) => (
          <ServiceCard service={service} />
        ))}
      </div>
    </div>
  </section>

  <section id="research" class="bg-gradient-to-b from-brand-50/40 via-white to-white py-24">
    <div class="mx-auto max-w-6xl px-6">
      <div class="flex flex-col gap-6 md:flex-row md:items-end md:justify-between">
        <div class="max-w-3xl">
          <p class="text-sm font-semibold uppercase tracking-[0.4em] text-brand-600">Research &amp; IP</p>
          <h2 class="mt-4 text-3xl font-semibold text-slate-900 md:text-4xl">研究成果と公開資料</h2>
          <p class="mt-4 text-base leading-relaxed text-slate-600 md:text-lg">
            学会発表・特許・展示会で公開した資料と、クラウド／エッジの研究成果をまとめています。旧サイトで人気のあった資料やデモコンテンツも、全て最新構成でアクセス可能です。
          </p>
        </div>
        <a href="/blog/" class="inline-flex items-center gap-2 text-sm font-semibold text-brand-600 hover:text-brand-700">
          最新のノートを見る
          <span aria-hidden="true">→</span>
        </a>
      </div>
      <div class="mt-12 grid gap-6 md:grid-cols-2">
        {researchHighlights.map((item) => (
          <ResearchCard item={item} />
        ))}
      </div>
    </div>
  </section>

  <section id="achievements" class="bg-white py-24">
    <div class="mx-auto max-w-6xl px-6">
      <div class="flex flex-col gap-6 md:flex-row md:items-end md:justify-between">
        <div>
          <p class="text-sm font-semibold uppercase tracking-[0.4em] text-brand-600">Timeline</p>
          <h2 class="mt-4 text-3xl font-semibold md:text-4xl text-slate-900">Hybrid Computing™ の歩み</h2>
          <p class="mt-4 max-w-2xl text-base leading-relaxed text-slate-600 md:text-lg">
            PoC や特許、国際カンファレンスでの発表など、旧サイトで紹介していたハイライトを新しいビジュアルで再編集しました。
          </p>
        </div>
      </div>
      <div class="mt-12 grid gap-6 md:grid-cols-2">
        {achievements.map((achievement) => (
          <AchievementCard achievement={achievement} />
        ))}
      </div>
    </div>
  </section>

  <section id="team" class="bg-gradient-to-b from-brand-50/40 via-white to-white py-24">
    <div class="mx-auto max-w-6xl px-6">
      <div class="flex flex-col gap-6 md:flex-row md:items-center md:justify-between">
        <div>
          <p class="text-sm font-semibold uppercase tracking-[0.4em] text-brand-600">Team</p>
          <h2 class="mt-4 text-3xl font-semibold text-slate-900 md:text-4xl">分散システムを駆動するチーム</h2>
          <p class="mt-4 max-w-2xl text-base leading-relaxed text-slate-600 md:text-lg">
            旧サイトのメンバー紹介を最新のプロフィールにアップデートしました。クラウド、ハードウェア、UX の専門家が Hybrid Computing™ を支えています。
          </p>
        </div>
      </div>
      <div class="mt-12 grid gap-6 md:grid-cols-2">
        {teamMembers.map((member) => (
          <TeamCard member={member} />
        ))}
      </div>
    </div>
  </section>

  <section id="partners" class="bg-gradient-to-r from-brand-50 via-white to-brand-50/80 py-24">
    <div class="mx-auto max-w-6xl px-6">
      <div class="flex flex-col gap-6 md:flex-row md:items-center md:justify-between">
        <div>
          <p class="text-sm font-semibold uppercase tracking-[0.4em] text-brand-600">Partners</p>
          <h2 class="mt-4 text-3xl font-semibold text-slate-900 md:text-4xl">共創パートナー</h2>
          <p class="mt-4 max-w-2xl text-base leading-relaxed text-slate-600 md:text-lg">
            Academic・企業・行政との連携を通じて Hybrid Computing™ の社会実装を推進しています。
          </p>
        </div>
      </div>
      <div class="mt-12 grid gap-6 md:grid-cols-2 xl:grid-cols-3">
        {partners.map((partner) => (
          <PartnerCard partner={partner} />
        ))}
      </div>
    </div>
  </section>

  <section id="company" class="bg-white py-24">
    <div class="mx-auto max-w-6xl px-6">
      <div class="grid gap-10 lg:grid-cols-[minmax(0,1fr)_420px]">
        <div class="space-y-6">
          <p class="text-sm font-semibold uppercase tracking-[0.4em] text-brand-600">Company</p>
          <h2 class="text-3xl font-semibold text-slate-900 md:text-4xl">会社概要</h2>
          <div class="rounded-3xl border border-brand-100 bg-white/90 p-8 shadow-md">
            <dl class="grid gap-4 sm:grid-cols-2">
              <div>
                <dt class="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">設立</dt>
                <dd class="mt-1 text-base text-slate-700">{companyInfo.establishment}</dd>
              </div>
              <div>
                <dt class="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">代表</dt>
                <dd class="mt-1 text-base text-slate-700">{companyInfo.representative}</dd>
              </div>
              <div>
                <dt class="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">資本金</dt>
                <dd class="mt-1 text-base text-slate-700">{companyInfo.capital}</dd>
              </div>
              <div>
                <dt class="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">所在地</dt>
                <dd class="mt-1 text-base text-slate-700">{companyInfo.address}</dd>
              </div>
              <div>
                <dt class="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">TEL</dt>
                <dd class="mt-1 text-base text-slate-700">{companyInfo.tel}</dd>
              </div>
              <div>
                <dt class="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">Email</dt>
                <dd class="mt-1 text-base text-slate-700">
                  <a href={`mailto:${companyInfo.email}`} class="hover:text-brand-600">{companyInfo.email}</a>
                </dd>
              </div>
            </dl>
          </div>
          <div class="rounded-3xl border border-brand-100 bg-brand-50/70 p-8 shadow-sm">
            <h3 class="text-sm font-semibold uppercase tracking-[0.3em] text-brand-600">Mission</h3>
            <p class="mt-4 text-base leading-relaxed text-slate-600">
              {companyInfo.mission}
            </p>
          </div>
        </div>
        <div class="space-y-6">
          <iframe
            src={companyInfo.googleMap}
            loading="lazy"
            class="h-[320px] w-full rounded-3xl border border-brand-100 shadow-md"
            allowfullscreen
          ></iframe>
          <a
            href={companyInfo.googleMapLink}
            class="inline-flex items-center gap-2 text-sm font-semibold text-brand-600 hover:text-brand-700"
          >
            Google Mapsで開く
            <span aria-hidden="true">↗</span>
          </a>
        </div>
      </div>
    </div>
  </section>

  <section id="contact" class="bg-gradient-to-r from-brand-100 via-brand-50 to-white py-24">
    <div class="mx-auto max-w-4xl px-6 text-center">
      <p class="text-sm font-semibold uppercase tracking-[0.4em] text-brand-700">Contact</p>
      <h2 class="mt-4 text-3xl font-semibold text-slate-900 md:text-4xl">プロジェクトのご相談・共同研究のお問い合わせ</h2>
      <p class="mt-4 text-base leading-relaxed text-slate-600 md:text-lg">
        PoC 設計、Hybrid Computing™ ミドルウェア、行政 DX などについてお気軽にご相談ください。旧サイトで紹介している資料も合わせてご提案可能です。
      </p>
      <div class="mt-8 flex flex-wrap justify-center gap-4">
        <a
          href={`mailto:${companyInfo.email}`}
          class="inline-flex items-center gap-3 rounded-full bg-brand-500 px-6 py-3 text-sm font-semibold text-white shadow-soft transition hover:-translate-y-0.5 hover:bg-brand-400"
        >
          メールで問い合わせる
          <span aria-hidden="true">→</span>
        </a>
        <a
          href="https://cal.com/tonoi/consult"
          class="inline-flex items-center gap-3 rounded-full border border-brand-200 bg-white px-6 py-3 text-sm font-semibold text-brand-600 transition hover:border-brand-300"
        >
          オンラインミーティングを予約
          <span aria-hidden="true">↗</span>
        </a>
        <a
          href="/legacy/"
          class="inline-flex items-center gap-3 rounded-full border border-brand-200/70 bg-white/80 px-6 py-3 text-sm font-semibold text-brand-700 transition hover:border-brand-300 hover:bg-white"
        >
          旧サイトの全コンテンツを見る
          <span aria-hidden="true">↗</span>
        </a>
      </div>
    </div>
  </section>
</BaseLayout>
